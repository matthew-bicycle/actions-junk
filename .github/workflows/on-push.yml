name: ðŸ”„ On Push
run-name: "Push to branch ${{ github.ref }}"

on:
  push:

jobs:
  Build:
    uses: ./.github/workflows/Build.yml
    secrets:
      GCP_PRIVATE_KEY_JSON: ${{ secrets.GCP_PRIVATE_KEY_JSON }}
  DeployMainToDev:
    name: Update dev from new main
    if: ${{ github.ref == 'refs/heads/main' }}
    needs: [Build]
    uses: ./.github/workflows/deploy-env.yml
    with:
      envName: dev
